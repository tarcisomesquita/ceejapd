<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Entrar 2</title>
<meta viewport='width=device-width'>
</head>

<body>
<style>
body {
  height: 100%;
  background-color: #FFFFFF;
  font-family: 'Open Sans',sans-serif;
  color: #000000;
  font-size: 16px;
  line-height: 23px;
  text-align: justify;
  margin: 0px;
  padding: 5mm;
}

h1 {
  text-align: center;
}

a:link    {color:#2160DE; text-decoration:none;}      /* unvisited link  */
a:visited {color:#2160DE; text-decoration:none;}      /* visited link    */
a:hover   {color:#2160DE; text-decoration:underline;} /* mouse over link */
a:active  {color:#2160DE; text-decoration:underline;} /* selected link   */

pre {
  color: #000000;
}

.erro {
  text-align: center;
  font-size: 14pt;
  line-height: 20pt;
  font-weight: bold;
  
  margin: 0px;
  padding-top: 2cm;
  padding-bottom: 2cm;
  width: 100vw;
  background-color: #FFFF77;
  position: fixed;
  top: 30px;
}

.link {
  cursor:pointer
}

.link:hover, .link:active {
  text-decoration:underline;
}

#customBtn {
  display: inline-block;
  background: #1a73e8;
  color: #ffffff;
  border: 1px solid transparent;
  font-size: 16px;
  line-height: 23px;
  margin-left: 10px;
  margin-right: 8px;
  min-width: 96px;
  padding: 9px 23px;
  text-align: center;
  vertical-align: middle;
  -moz-border-radius: 4px;
  border-radius: 4px;
  box-sizing: border-box;
}

#customBtn:hover {
  cursor: pointer;
}

.container {
  display: none;
  position: fixed;
  top: 0px;
  left: 0px;
  width: 100vw;
  height: 100vh;
  background: #6C7A89;
  opacity: 0.5;
}

.box {
  display: none;
  position: fixed;
  top: 5%;
  left: 30%;
  background: #bbeeff;
  opacity: 1;
  padding: 30px;
  border: 2px solid #AAAAAA;
  text-align: center;
}

table, td, th {
  border: 1px solid black;
}

table { 
  border-collapse: collapse;
}
</style>

</head>

<body onload='startApp()'>

<div id="page">

<br />

<div id="customBtn" class="customBtn" onclick="informe('login: ' + navigator.userAgent)">Fazer login</div>

<iframe id="hiddenFrame" name="hiddenFrame" style="display:none"></iframe>
<form id="formlog2" style='display:none' enctype="application/x-www-form-urlencoded" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSeH6hDfEOI6jvgDsdkuuUeah_FU3dPGxZZr-sBBkIjj4Hkwog/formResponse" method="POST" target="hiddenFrame">
<input id="texto" name="entry.667481942" type="hidden">
</form>

<div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>

<script>
function informe(mensagem) {
  document.getElementById("texto").value = mensagem;
  document.forms.formlog2.submit();
}

var initSignIn = function() {
  auth2 = gapi.auth2.init({client_id: '330234016508-6d6d97vqrtofusi7f85c9t1iu6nmtced.apps.googleusercontent.com', scope:'profile email'});
  
  auth2.attachClickHandler(document.getElementById('customBtn'), {}, null, null);
  
  auth2.isSignedIn.listen(signinChanged);

  if (auth2.isSignedIn.get() == true) {
    auth2.signIn(); // |  signOut()
  }
  
  googleUser = auth2.currentUser.get();
};

function init() {
  gapi.load('auth2', initSignIn);
}

function onSignIn(googleUser) {
  // Useful data for your client-side scripts:
  var profile = googleUser.getBasicProfile();
  
  informe('login2: ' + profile.getEmail());
  
  setTimeout(function(){ window.location.href="https://tarcisomesquita.github.io/ceejapd/index.html"; }, 3000);
}
// https://developers.google.com/identity/sign-in/web/reference
</script>

<meta name="google-signin-scope" content="profile email">
<meta name="google-signin-client_id" content="330234016508-6d6d97vqrtofusi7f85c9t1iu6nmtced.apps.googleusercontent.com">

<script src="https://apis.google.com/js/platform.js?onload=init" async defer></script>

</body>
</html>
